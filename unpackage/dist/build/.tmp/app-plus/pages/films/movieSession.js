(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/films/movieSession"],{"04f3":function(i,e,s){"use strict";(function(i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=s("3e08"),n=s("6300"),o=s("1c23"),a=s("14dc"),l=s("1264"),m=function(){return Promise.all([s.e("common/vendor"),s.e("components/YnComponents/ynGallery/ynGallery")]).then(s.bind(null,"13b3"))},r=function(){return s.e("components/uni-segmented-control/uni-segmented-control").then(s.bind(null,"cae7"))},f={data:function(){return{cinema:{},sh:0,Msg:{},title:"Hello",testimgs:[],imgs:[],current:0,days:[],cinemaId:"",filmId:"",currentDate:"",sessions:[],dimensional:""}},components:{ynGallery:m,uniSegmentedControl:r},onShow:function(){this.days=[];var i=(0,t.getTodayTom)(0,"-");i="今天"+i,this.days.push(i),console.log("today"+JSON.stringify(i)," at pages\\films\\movieSession.vue:108");var e=(0,t.getTodayTom)(1,"-");e="明天"+e,this.days.push(e);var s=(0,t.getTodayTom)(2,"-");s="后天"+s,this.days.push(s),this.currentDate=(0,t.getTodayTom)(0,"-")},onLoad:function(i){var e=this;console.log("option"+JSON.stringify(i)," at pages\\films\\movieSession.vue:119"),this.cinemaId=i.cinemaId,this.getCinema(),i.filmId&&(this.filmId=i.filmId,(0,o.findFilmById)({id:i.filmId}).then(function(i){console.log("res-------------"+JSON.stringify(i)," at pages\\films\\movieSession.vue:126"),0===i.errno&&(e.testimgs[0]=i.data)},function(i){console.log("err"+JSON.stringify(i)," at pages\\films\\movieSession.vue:133")})),console.log("this.testimgs"+JSON.stringify(this.testimgs)," at pages\\films\\movieSession.vue:137")},methods:{getCinema:function(){var i=this;console.log("this.testimgs"+JSON.stringify(this.testimgs)," at pages\\films\\movieSession.vue:142");var e={id:this.cinemaId};(0,n.findCinemaById)(e).then(function(e){console.log("res"+JSON.stringify(e)," at pages\\films\\movieSession.vue:148"),0===e.errno&&(i.cinema=e.data,i.cinema.filmId.forEach(function(e){var s={id:e.id};(0,o.findFilmById)(s).then(function(e){console.log("res1"+JSON.stringify(e)," at pages\\films\\movieSession.vue:157"),0===e.errno&&(i.filmId?(console.log("aaaaaaa"," at pages\\films\\movieSession.vue:162"),i.testimgs[0]&&e.data._id!==i.testimgs[0]._id?(console.log("fffffffffff"," at pages\\films\\movieSession.vue:164"),i.testimgs.push(e.data)):i.testimgs[0]||(console.log("dddddddddddd"," at pages\\films\\movieSession.vue:167"),i.testimgs.push(e.data))):(console.log("bbbbbbbbb"," at pages\\films\\movieSession.vue:171"),i.testimgs.push(e.data)),i.Msg=i.testimgs[0],""===i.filmId&&(console.log("this.filmId"," at pages\\films\\movieSession.vue:177"),i.filmId=i.testimgs[0]._id),console.log("this.testimgs"+JSON.stringify(i.testimgs)," at pages\\films\\movieSession.vue:180"),i.findSession(),i.setimgs())})}))},function(i){console.log("err"+JSON.stringify(i)," at pages\\films\\movieSession.vue:190")})},goMap:function(e,s){i.openLocation({latitude:parseFloat(s),longitude:parseFloat(e),success:function(){console.log("success"," at pages\\films\\movieSession.vue:199")}})},onclickimg:function(i){console.log("111"+JSON.stringify(i)," at pages\\films\\movieSession.vue:204"),void 0!=i.index&&(this.Msg="".concat(i.index)),this.filmId=i._id,this.Msg=i,this.findSession(),this.dimensional=i.dimensional},setimgs:function(){console.log("======================================="+JSON.stringify(this.testimgs)," at pages\\films\\movieSession.vue:213");var i=[];for(var e in this.testimgs){0===this.testimgs[e].dimensional?this.testimgs[e].dimensional="3D":this.testimgs[e].dimensional="2D";var s={dec:"",badeg:"",badegcolor:"#000000",url:"",dominant:"",_id:"",filmName:"",duration:"",director:"",performer:"",dimensional:""};s.url="http://"+this.testimgs[e].pictures,console.log("imgobj.url"+JSON.stringify(s.url)," at pages\\films\\movieSession.vue:235"),s.dominant=this.retcolor(),s.dec=e,s.badeg="惠",s.badegcolor="orange",s._id=this.testimgs[e]._id,s.filmName=this.testimgs[e].filmName,s.duration=this.testimgs[e].duration,s.director=this.testimgs[e].director,s.performer=this.testimgs[e].performer,s.dimensional=this.testimgs[e].dimensional,i.push(s)}this.imgs=i},retcolor:function(){var i="#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6);return i},onClickItem:function(i){console.log("eee"+JSON.stringify(i)," at pages\\films\\movieSession.vue:255"),0===i?this.currentDate=(0,t.getTodayTom)(0,"-"):1===i?this.currentDate=(0,t.getTodayTom)(1,"-"):2===i&&(this.currentDate=(0,t.getTodayTom)(2,"-")),this.findSession()},findSession:function(){var i=this;this.sessions=[],console.log("eeeeeee"+JSON.stringify(this.filmId)," at pages\\films\\movieSession.vue:267");var e={date:this.currentDate,cinemaId:this.cinemaId,filmId:this.filmId};console.log("postSata"+JSON.stringify(e)," at pages\\films\\movieSession.vue:273"),(0,a.findSessionByDateCineFilm)(e).then(function(e){console.log("res==================="+JSON.stringify(e)," at pages\\films\\movieSession.vue:276"),console.log("res==================="+JSON.stringify(e)," at pages\\films\\movieSession.vue:278"),0===e.errno&&e.data.forEach(function(e){(0,l.findHallById)({id:e.hallId}).then(function(s){if(0===s.errno){e.hallName=s.data.hallName;var n=(0,t.compare)(e.playTime);if(n){var o=e.playTime.split(" ");e.playTime=o[o.length-1];var a=e.endTime.split(" ");e.endTime=a[a.length-1],i.sessions.push(e)}i.sessions.sort(function(i,e){return i.playTime>e.playTime?1:-1})}})})},function(i){console.log("err"+JSON.stringify(i)," at pages\\films\\movieSession.vue:310")})},goCinemaSeat:function(e){console.log("data"+JSON.stringify(e)," at pages\\films\\movieSession.vue:316"),i.navigateTo({url:"./cinemaSeat?sessionId="+e._id+"&filmId="+e.filmId+"&cinemaId="+e.cinemaId+"&hallId="+e.hallId+"&date="+this.currentDate})},goBack:function(){i.navigateBack({delta:0})}}};e.default=f}).call(this,s("6e42")["default"])},"0e97":function(i,e,s){},"4ff5":function(i,e,s){"use strict";s.r(e);var t=s("6854"),n=s("fdb7");for(var o in n)"default"!==o&&function(i){s.d(e,i,function(){return n[i]})}(o);s("6aed");var a=s("2877"),l=Object(a["a"])(n["default"],t["a"],t["b"],!1,null,null,null);e["default"]=l.exports},6854:function(i,e,s){"use strict";var t=function(){var i=this,e=i.$createElement;i._self._c},n=[];s.d(e,"a",function(){return t}),s.d(e,"b",function(){return n})},"6aed":function(i,e,s){"use strict";var t=s("0e97"),n=s.n(t);n.a},fdb7:function(i,e,s){"use strict";s.r(e);var t=s("04f3"),n=s.n(t);for(var o in t)"default"!==o&&function(i){s.d(e,i,function(){return t[i]})}(o);e["default"]=n.a}},[["26ef","common/runtime","common/vendor"]]]);